<odoo>
    <data noupdate="1">
        <!-- 
            REGRA ÚNICA: Visibilidade Hierárquica para TODOS os usuários
            - Usuários normais: veem apenas contatos da sua hierarquia
            - Presidente: vê todos os contatos (inclusive sem vendedor)
        -->
        <record id="res_partner_hierarchical_visibility_rule" model="ir.rule">
            <field name="name">Partner: Visibilidade Hierárquica</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="domain_force">
                ['|',
                 ('user_id', '=', False),
                 ('user_id', 'in', user.allowed_user_ids.ids)]
            </field>
            <field name="active" eval="True"/>
        </record>

        <!-- 
            REGRA ESPECIAL: Para Presidente ver TUDO (sobrescreve a regra anterior)
            Esta regra só aplica ao grupo Presidente e permite ver todos os contatos
        -->
        <record id="res_partner_president_full_access_rule" model="ir.rule">
            <field name="name">Partner: Acesso Total - Presidente</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="groups" eval="[(4, ref('crm_sales_unit.group_president'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field> <!-- SEM FILTRO -->
            <field name="active" eval="True"/>
        </record>
    </data>
</odoo>